<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>前端数据模拟服务器 - Front-end Mock Server</title>
    <link rel="stylesheet" href="/fms/?type=fms.css">
</head>
<body>
    <div class="header">
        <div class="container">
            <span class="logo tooltipped tooltipped-s" aria-label="前端数据模拟解决方案">
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKEAAAA1CAYAAAAppovjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkJCRjlGRjA3MjNBNDExRTVCQzUzOTZDRTJCNTk2NTMzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkJCRjlGRjA4MjNBNDExRTVCQzUzOTZDRTJCNTk2NTMzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QkJGOUZGMDUyM0E0MTFFNUJDNTM5NkNFMkI1OTY1MzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QkJGOUZGMDYyM0E0MTFFNUJDNTM5NkNFMkI1OTY1MzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz53h+SeAAAGWklEQVR42uxd3ZGj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" alt="fms">
            </span>
            <ul class="links">
                <li><a href="http://fmsjs.org" class="tooltipped tooltipped-s" aria-label="文档" target="_blank">Document</a></li>
                <li><a href="https://github.com/nimojs/fms/issues" class="tooltipped tooltipped-s" aria-label="社区" target="_blank">Community</a></li>
                <li><a href="https://github.com/nimojs/fms/issues" class="tooltipped tooltipped-s" aria-label="常见问题" target="_blank">FAQ</a></li>
                <li><a href="https://github.com/nimojs/fms/" class="tooltipped tooltipped-s" aria-label="源码" target="_blank">GitHub</a></li>
            </ul>
            <img class="qrcode" id="qrcode">
        </div>
    </div>
    <div class="container main">
        <div class="columns">
            <div class="one-half column">
                <nav class="menu ajaxlist">
                    <span class="menu-heading ">
                        AJAX
                        <span class="menu-heading-more reset-cookie js-resetCookie">Reset</span>
                    </span>
                    <div class="nav" id="ajaxlist">
                        <div class="loading">Loading...</div>
                    </div>
                </nav>
            </div>
            <div class="one-half column">
                <div class="menu Views">
                    <span class="menu-heading ">Views
                    <span class="menu-heading-more reset-cookie js-resetCookie">Reset</span>
                    </span>
                    <div id="Viewlist"><div class="loading">Loading...</div></div>
                    <div id="ReadList"><div class="loading">Loading...</div></div>
                </div>
            </div>
        </div>
        <div class="menu document">
            <span class="menu-heading">
                Document
                <span class="link" id="documentLink">
                    <a href="https://github.com/nimojs/fms/" id="docHTMLLink" class="tooltipped tooltipped-e" aria-label="html 格式文档" target="_blank">HTML</a>
                </span>
            </span>
            <div class="markdown-body" id="doc">
                <div class="loading">Loading...</div>
            </div>
        </div>
    </div>
<span id="gotop" class="gotop">Top</span>
<span id="gotop2" class="gotop2">Top</span>
<script type="text/template" id="list_tpl">
{{#each this}}
    {{#each this}}
        <div class="menu-item">
            <a href="#{{url}}!{{mode}}" class="anchor">#</a>
            <label>
            {{@key}}: {{title}}·<a href="{{url}}" target="_blank">{{url}}</a>
            {{#if res}}
                <select class="js-select-cookie">
                {{#is mode 'view'}}<option value="__default">__default</option>{{/is}}
                {{#each res}}
                    <option {{#is ../active_res this}}selected{{/is}} value="{{../url}}`{{../mode}}`{{../type}}`{{this}}">{{this}}</option>
                {{/each}}
                </select>
                <pre></pre>
            {{/if}}
            </label>
        </div>
    {{/each}}
{{/each}}
</script>


<script type="text/template" id="read_tpl">
<div>
{{#each this}}
   {{#if this.files}}
        <div class="menu-heading title">
        {{this.title}}
        </div>
        {{#each this.files}}
        <div class="menu-item">
            <a href="{{url}}" target="_blank">{{title}}·{{url}}</a>
        </div>
        {{/each}}
   {{/if}}
{{/each}}
</div>
</script>
<label>

    <script src="/fms/?type=fms.js" ></script>
    <script>
window.$ = fms.$
window.Random = fms.Random
window.Handlebars = fms.Handlebars
// Ref: https://github.com/nimojs/handlebars-helper-is/blob/master/helper-is.js
;(function(){var isArray=function(value){return Object.prototype.toString.call(value)==="[object Array]"};var ExpressionRegistry=function(){this.expressions=[]};ExpressionRegistry.prototype.add=function(operator,method){this.expressions[operator]=method};ExpressionRegistry.prototype.call=function(operator,left,right){if(!this.expressions.hasOwnProperty(operator)){throw new Error('Unknown operator "'+operator+'"')}return this.expressions[operator](left,right)};var eR=new ExpressionRegistry;eR.add("in",function(left,right){if(!isArray(right)){right=right.split(",")}return right.indexOf(left)!==-1});var helperIs=function(){var args=arguments,left=args[0],operator=args[1],right=args[2],options=args[3];if(args.length==2){options=args[1];if(left){return options.fn(this)}return options.inverse(this)}if(args.length==3){right=args[1];options=args[2];if(left==right){return options.fn(this)}return options.inverse(this)}if(eR.call(operator,left,right)){return options.fn(this)}return options.inverse(this)};Handlebars.registerHelper("is",helperIs)})();


var handles = {
    ajax: {},
    view: {}
}
var cookie = fms.cookie.get('fms')
if (!cookie) {
    cookie = {}
}
else {
    cookie = JSON.parse(cookie)
}
var fList = Handlebars.compile($('#list_tpl').html())
var fRead = Handlebars.compile($('#read_tpl').html())
function renderList () {
    $('#ajaxlist').html('Reset').html(fList(handles.ajax))
    $('#Viewlist').html('Reset').html(fList(handles.view))   
}
$.ajax({
    url: '/fms/?type=handle',
    dataType: 'json'
}).done(function (res) {
    $.each(res, function (url, handle) {
        $.each(handle, function (mode, handle) {
            $.each(handle, function (type, settings) {
                fms.namespace([url, mode, type], cookie)
                var res = cookie[url][mode][type]
                fms.namespace([mode, url, type], handles)
                handles[mode][url][type] = {
                    title: settings.title,
                    res: settings.res,
                    url: url,
                    type: type,
                    mode: mode,
                    active_res: cookie[url][mode][type]
                }
            })
        })
    })
    renderList()
    $.ajax({
        url: '/fms/?type=read',
        dataType: 'json'
    }).done(function (res) {
        $('#ReadList').html(fRead(res))
    })
})
$.ajax({
    url: '/fms/?type=doc',
    dataType: 'html'
}).done(function (res) {
    var $doc = $('#doc')
    $doc.html(res)
})

$(function () {
    $('body').on('change', '.js-select-cookie', function () {
        var value = this.value
        if (value === '__default') {
            return
        }
        var $this = $(this)        
        fms.res(value, $this.next('pre'))
    })
    $(".js-resetCookie").on('click', function () {
        fms.reset()
        $('.js-select-cookie').each(function () {
            var $this = $(this)
            console.log($this.find('option').eq(0).get(0))
            $this.find('option').eq(0).prop('selected', true)
        })
    })
})
    </script>
</script>
</body>
</html>