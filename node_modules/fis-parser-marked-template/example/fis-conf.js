var coffee = require('coffee-script')
fis.match('**.md', {
    parser: fis.plugin('marked-template', {
        hljs: {
            tabReplace: '    '
        },
        marked: {
            gfm: true,        
            breaks: true
        },
        templateDir: '/_template/',
            defaultTemplate: function () {/*!
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" >
        <title><%- title %></title>
    </head>
    <body>
    <%- content %>
    </body>
    </html>
            */},
        codeCompile: {
            coffee: function (code) {
                return {
                    type: 'js',
                    code: coffee.compile(code)
                }
            }
        }
    }),
    useCache: false,
    rExt: '.html'
})

fis.match('_template/**', {
    release: false
})